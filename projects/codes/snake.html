<!doctype html>
<html class="theme-next muse use-motion">
<head>
  <title>
  
  
     | 前端路上
  
</title>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />


  <meta name="keywords" content="前端技术博客,前端学习文章,前端路上,雅X共赏" />




<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />



  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />


<meta name="description" content="贪吃蛇-前端路上
    
    
    
    
    
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement(&quot;script&quot;);
          hm.src = &quot;https://hm.b">
<meta property="og:type" content="website">
<meta property="og:title" content="前端路上">
<meta property="og:url" content="http://refined-x.com/projects/codes/snake.html">
<meta property="og:site_name" content="前端路上">
<meta property="og:description" content="贪吃蛇-前端路上
    
    
    
    
    
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement(&quot;script&quot;);
          hm.src = &quot;https://hm.b">
<meta property="og:updated_time" content="2017-06-27T02:43:41.437Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前端路上">
<meta name="twitter:description" content="贪吃蛇-前端路上
    
    
    
    
    
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement(&quot;script&quot;);
          hm.src = &quot;https://hm.b">

<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"right","display":"post"},
    fancybox: false,
    motion: true,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: "",
      labels: ""
    }
  };
</script>
  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?f10103677155b485824f29def715eb5d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
  
  
    
  
  <div class="container one-collumn sidebar-position-right  ">
    <div class="headband"></div>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  
  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">前端路上</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">枪在手，跟我走，前端路上不回头</p>
</div>
<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>
<nav class="site-nav">
  
  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-首页">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-归档">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-标签">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-作品">
          <a href="/projects" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-fire"></i> <br />
            
            作品
          </a>
        </li>
      
        
        <li class="menu-item menu-item-关于">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-留言">
          <a href="/comment" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-send"></i> <br />
            
            留言
          </a>
        </li>
      
      
    </ul>
  
  
</nav> </div>
    </header>
    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <div id="posts" class="posts-expand">
    
    
      <!doctype html>
<html lang="zh-cn">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>贪吃蛇-前端路上</title>
    <meta content="贪吃蛇,前端技术学习" name="Keywords">
    <meta content="贪吃蛇是一款有趣的益智游戏，在游戏中每得10分将进入下一关，无限关卡等你挑战" name="Description">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" type="text/css" href="../asset/ui.css">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?f10103677155b485824f29def715eb5d";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>

<body>
<h1 class="hide">贪吃蛇</h1>
    <a href="//refined-x.com" title="前端路上" style="position: absolute;right: 0;top:0;padding:.5em;">前端路上</a>
    <style>
    #snake-layer {
        margin: 40px auto;
    }
    .snakeHead{background:#fc0;}
    .line {
        position: absolute;
    }
    
    .lineH {
        border-bottom: 1px solid #ccc;
        width: 100%;
    }
    
    .lineS {
        border-right: 1px solid #ccc;
        height: 100%;
    }
    
    .noborder .line {
        border: 0;
    }
    </style>
    <script src="../asset/sea.js" id="seajsnode"></script>
    <script>
    seajs.config({
        base: "http://static-zt.oss-cn-qingdao.aliyuncs.com/modules",
        alias: {
            "audio": "audio/audio",
            "copy": "copy/ZeroClipboard",
            "flv": "flv/flv",
            "hook": "hook/hook",
            "jquery": "jquery/1/jquery.js",
            "validform": "validform/validform",
            "My97DatePicker": "My97DatePicker/WdatePicker",
            "raty": "raty/raty",
            "upload": "upload/upload",
            "makethumb": "upload/makethumb",
            "localResizeIMG": "upload/localResizeIMG",
            "video": "video/video",
            // localstorage缓存
            "seajs-localcache": "seajs/seajs-localcache",
            // debug
            "seajs-debug": "seajs/seajs-debug"
        }
    });
    </script>
    <script>
    /**
     * index
     */
    define('scripts', function(require) {
        var $ = require('jquery');
        var box = require('box');

        var length = 20, //画布边长
            cellLength = 16, //单位长度px
            enemyNum = length * 0.5, //食物数量
            snakeLength = 3, //蛇初始长度
            mapLine = true, //显示辅助线
            direct = '+x', //初始方向
            speed = 600; //初始速度，数值越小越快

        var myLevel = 1;
        var myScore = 0;    //得分
        var layer = $('<div id="snake-layer"/ style="position: relative;border: 1px solid #ccc">');
        var snake = '<div class="snake bg-success" />';
        var random = function() {
            return Math.floor(Math.random() * length);
        };
        var snakes = [];
        var runner;
        var snakePlace = {}; //蛇头位置
        var drawMap = function(mapLine) {
            layer.css({
                width: length * cellLength,
                height: length * cellLength
            });
            $('body').append(layer);
        };
        var drawLine = function() {
            var lineH = '<div class="line lineH" />';
            var lineS = '<div class="line lineS" />';
            for (var i = 0; i < length - 1; i++) {
                layer.append($(lineH).css({
                    top: i * cellLength,
                    height: cellLength
                }).add($(lineS).css({
                    left: i * cellLength,
                    width: cellLength
                })));
            }
        };
        var addPoint = function(dom, x, y, cb) {
            dom.css({
                width: cellLength,
                height: cellLength,
                position: 'absolute',
                left: x * cellLength,
                top: y * cellLength
            });
            dom.x = x;
            dom.y = y;
            layer.append(dom);
            if (typeof(cb) === 'function') {
                cb(dom);
            }
        };
        var checkPointInSnake = function(point, correct) {
            var result = false;
            var checkArray = snakes.slice(0);
            for (var i = 0; i < checkArray.length; i++) {
                if (point.x === checkArray[i].x && point.y === checkArray[i].y) {
                    if (correct) {
                        point = {
                            x: random(),
                            y: random()
                        };
                        checkPointInSnake(point);
                    } else {
                        result = true;
                    }
                    break;
                }
            }
            if (correct) {
                return point;
            } 
            return result;
        };
        //创建食物
        var foods = [];
        var addFood = function(enemyNum) {
            for (var i = 0; i < enemyNum; i++) {
                var ememy_x = random();
                var ememy_y = random();
                var food = $('<div class="bg-danger" />');
                var point = checkPointInSnake({
                    x: ememy_x,
                    y: ememy_y
                }, true);
                point.dom = food;
                foods.push(point);
                addPoint(food, point.x, point.y);
            }
        };
        //游戏得分
        var getScore = function(){
            $('#myScore').text(++myScore);
            if (myScore % 10 === 0) {
                $('#myLevel').text(++myLevel);
                speed = Math.round(speed * 0.8);
            }
        };
        //运动
        var run = function() {
            switch (direct) {
                case "+x":
                    snakePlace.x = snakePlace.x + 1;
                    break;
                case "+y":
                    snakePlace.y = snakePlace.y - 1;
                    break;
                case "-x":
                    snakePlace.x = snakePlace.x - 1;
                    break;
                case "-y":
                    snakePlace.y = snakePlace.y + 1;
                    break;
                default:
            }
            //边界检测
            if (snakePlace.x >= length || snakePlace.x < 0 || snakePlace.y >= length || snakePlace.y < 0) {
                clearInterval(runner);
                if(window.localStorage){
                    var lastScore = parseInt(localStorage.getItem('snake-score'));
                    if(myScore > lastScore){
                        require.async('notice', function(Notice){
                           Notice({
                            title: '打破纪录！',
                            desc: '恭喜你，创造新的记录：' + myScore + '！'
                           });
                        });
                        localStorage.setItem('snake-score', myScore);
                    }
                }
                return box.alert('游戏结束！');
            }
            //自身检测
            if (checkPointInSnake(snakePlace)) {
                clearInterval(runner);
                return box.alert('游戏结束！');
            }
            $('.snakeHead').removeClass('snakeHead');
            //食物检测
            var hasFood;
            for (var i = 0; i < foods.length; i++) {
                if (snakePlace.x === foods[i].x && snakePlace.y === foods[i].y) {
                    addPoint($(snake).addClass('snakeHead'), snakePlace.x, snakePlace.y, function(dom) {
                        snakes.push(dom);
                    });
                    hasFood = true;
                    foods[i].dom.remove();
                    foods.splice(i, 1);
                    break;
                }
            }
            if (hasFood) {
                addFood(1);
                getScore();
                clearInterval(runner);
                runner = setInterval(run, speed);
            } else {
                var footer = snakes.shift();
                footer.css({
                    top: snakePlace.y * cellLength,
                    left: snakePlace.x * cellLength
                }).addClass('snakeHead');
                footer.x = snakePlace.x;
                footer.y = snakePlace.y;
                snakes.push(footer);
            }
        };
        //画地图
        drawMap(mapLine);
        if (mapLine) {
            drawLine();
        }
        //画蛇
        for (var i = 0; i < snakeLength; i++) {
            var _x = Math.floor(length / 2);
            var _y = _x;
            switch (direct) {
                case "+x":
                    _x += i;
                    break;
                case "+y":
                    _y -= i;
                    break;
                case "-x":
                    _x -= i;
                    break;
                case "-y":
                    _y += i;
                    break;
                default:
            }
            addPoint($(snake), _x, _y, function(dom) {
                //蛇头
                if (i === snakeLength - 1) {
                    snakePlace = {
                        x: _x,
                        y: _y
                    };
                    dom.addClass('snakeHead');
                }
                snakes.push(dom);
            });
        }
        //画食物
        addFood(enemyNum);
        //控制
        document.onkeydown = function(e) {
            switch (e.keyCode) {
                case 38:
                    //up
                    direct = '+y';
                    break;
                case 40:
                    //down
                    direct = '-y';
                    break;
                case 37:
                    //left
                    direct = '-x';
                    break;
                case 39:
                    //right
                    direct = '+x';
                    break;
                default:
            }
        };
        $('body')
        .append('<div class="tc"><div class="h1">关卡：<span id="myLevel">'+ myLevel +'</span> 得分：<span id="myScore">'+ myScore +'</span></div><button class="btn btn-success" id="snakeStart">开始</button> <button class="btn btn-warning" id="snakePause">暂停</button> <button class="btn btn-info" id="snakeRestart">重新开始</button> <button class="btn btn-default" id="toggleLine">切换辅助线</button><p class="m">点击开始，使用上、下、左、右箭头操作</p></div>')
            .on('click', '.btn', function() {
                var btnid = $(this).attr('id');
                switch(btnid){
                    case 'snakeStart':
                        runner = setInterval(run, speed);
                    break;
                    case 'snakePause':
                        clearInterval(runner);
                    break;
                    case 'toggleLine':
                        layer.toggleClass('noborder');
                    break;
                    case 'snakeRestart':
                        window.location.reload();
                    break;
                    default:
                }
            });
    });
    seajs.use('scripts');
    </script>
    <script type="text/javascript" src="//push.zhanzhang.baidu.com/push.js"></script>
</body>

</html>

    
  </div>

          </div>
          
            
          
        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>
  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
      
      
      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars0.githubusercontent.com/u/4016839?v=3&s=460"
               alt="雅X共赏" />
          <p class="site-author-name" itemprop="name">雅X共赏</p>
          <p class="site-description motion-element" itemprop="description">原创前端技术博客，致力于分享前端学习路上的第一手资料，专注web前端开发、移动端开发、混合应用开发、前端自动化、前端工程化，Nodejs开发。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/">
              <span class="site-state-item-count">9</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>
          
          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          
        </nav>
        
        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/416405800" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/tower1229" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="/projects/" target="_blank" title="Projects">
                  
                    <i class="fa fa-fw fa-fire"></i>
                  
                  Projects
                </a>
              </span>
            
          
        </div>
        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="http://creativecommons.org/licenses/by-nc-nd/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-nd.svg" alt="Creative Commons" />
            </a>
          </div>
        
        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://refined-x.com/projects" title="雅X共赏" target="_blank">雅X共赏</a>
                </li>
              
            </ul>
          </div>
        
      </section>
      
    </div>
  </aside>


        
      </div>
    </main>
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <a href="http://refined-x.com" title="枪在手，跟我走，前端路上不回头" class="author" itemprop="copyrightHolder">雅X共赏</a>
</div>
        
        
      </div>
    </footer>
    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>
  







  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  

  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>

  
  
  
  
  
  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>
<script src="http://js.passport.qihucdn.com/11.0.1.js?b3626f4bd6cd1fe45d49cfdd67138a37" id="sozz"></script>

</body>
</html>